// Generated by CoffeeScript 1.6.2
var dot;

dot = require('dot');

module.exports = {
  load: function(cb) {
    return cb();
  },
  oncall: function(obj, params, cb) {
    var ct, e, output;

    if (obj.File !== true) {
      cb(new Error("The template plugin can only be applied to Files"));
      return;
    }
    try {
      ct = obj.getCurrentContent();
      output = dot.compile(ct.content || '');
      obj.updateContent({
        extension: '__template',
        content: output
      });
      return cb(null, obj);
    } catch (_error) {
      e = _error;
      return cb(e);
    }
  },
  unload: function(cb) {
    return cb();
  }
};
